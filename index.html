<link rel="stylesheet"
type="text/css" href="style/container.css" />
<script src="js/jquery.js"></script>
<script src="js/map.js"></script>
<script src="js/container.js"></script>
<script type="text/javascript" src="js/jquery.js"></script>
<script>$.ajaxSetup({ cache: true });</script>
<script type="text/javascript" src="js/map.js"></script>
<script type="text/javascript" src="js/three.min.js"></script>
<script>$.ajaxSetup({ cache: true });</script>
<script type="text/javascript" src="js/physi.js"></script>
<script type="text/javascript" src="js/canvas_to_map.js"></script>
<script type="text/javascript" src="js/game.js"></script>
<body>
<div id="menu_container"></div>
<script>
    var container = new Container(
    "#menu_container", function(container) {
        container.addImage("img/logo.png");
        container.render();
        setTimeout(function()
        {
            var audio_effects = true;
            container.clear();
            a = {"Official Maps": "http",
                "Your Maps": "localStorage"};
            for(name in a) {
                container.addSection(name, function(section) {
                    var storage_type = a[name];
                    MapsFactory(storage_type).list(function(list) {
                        if(storage_type == "localStorage")
                        {
                            section.addButton("Editor",
                            function(value) {
                                container.pushState()
                                .clear().include('editor.html');
                            });
                        }
                        for(i in list) {
                            section.addButton(list[i],
                            function(value) {
                                container.pushState().clear();
                                container.include('game.html',
                                {
                                    storage: storage_type,
                                    name: value,
                                    audio_effects: audio_effects
                                });
                            });
                            container.render();
                        }
                }) });
            }
            container.addSection("Tools", function(section) {
                section.addButton("Settings",
                function(value) {
                    container.pushState().clear();
                    container.addSection("Sound", function(section){
                        section.addToggle(audio_effects,
                        "Effects on", "Effects off",
                        function(state) {
                            audio_effects = state;
                        });
                    });
                    container.render();
                });
            })
            container.addLink(
            "https://github.com/yazgoo/nails_n_wood",
            "about");
        }, 2000);
    });
</script>
</body>
